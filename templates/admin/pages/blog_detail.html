{%extends 'admin/base_site.html'%}
{%load crispy_forms_tags %}
{% block extrastyle %}
<script src="/static/admin/global_assets/js/plugins/forms/styling/uniform.min.js"></script>
<script src="/static/admin/global_assets/js/demo_pages/form_inputs.js"></script>
<!-- 
<script  src="/static/admin/cropperjs/js/bootstrap.min.js" ></script>
<script src="/static/admin/cropperjs/js/cropper.min.js"></script> -->

<!-- <script  src="/static/admin/cropperjs/js/bootstrap.min.js" ></script>
<script src="/static/admin/cropperjs/js/cropper.min.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/0.8.0/cropper.min.css" rel="stylesheet"/> -->

<link rel="stylesheet" href="/static/admin/cropperjs/dist/cropper.min.css">
<script type="modeule" src="/static/admin/cropperjs/dist/cropper.min.js"></script>

{% endblock %}
{%block pagename%}Edit Blog{%endblock%}
{%block content%}

<!-- Content area -->
<div class="content">

	 
	<div class="card">

		<div class="card-body">

			<form action="" method="POST" enctype="multipart/form-data">
				<fieldset class="mb-3 ml-3 mr-3">
					<legend class="text-uppercase font-size-sm font-weight-bold">Edit Blog</legend>
					<p class="mb-4"> All Fields ending with * are required. You are required to fill fields in English and Amharic</p>
					{{form.errors}}
					{%csrf_token%}
					<div class="form-group row">
						<label class="col-form-label col-lg-3">Blog Title (English)*</label>
						<div class="col-lg-9">
							<input type="text" name="title" class="form-control" value="{{form.title}} " id="">
						 
							
						</div>
					</div>
					<div class="form-group row">
						<label class="col-form-label col-lg-3">Blog Title (Amharic) *</label>
							<div class="col-lg-9">
							<input type="text"required name="title_am" class="form-control" value="{{form.title_am}}" id="">
						</div>
							
					</div> 
					<div class="form-group row">
						<label class="col-form-label col-lg-3">Blog Tag (English) *</label>
						
							<div class="col-lg-9">
							<input type="text" required name="tag" class="form-control" value="{{form.tag}} " id="">
						
							
						</div>
					</div>
					<div class="form-group row">
						<label class="col-form-label col-lg-3">Blog Tag (Amharic) *</label>
						
							<div class="col-lg-9">
							<input type="text" required name="tag_am" class="form-control" value="{{form.tag_am}} " id="">
						
							
						</div>
					</div>

					<div class="form-group row">
						<label class="col-form-label col-lg-3">Blog Content (English)*</label>
						<div class="col-lg-9">
								<textarea  required class="summernote" name="content" >{{form.content}}</textarea>
						</div>
							
					</div>

					<div class="form-group row">
						<label class="col-form-label col-lg-3">Blog Content (Amharic) *</label>
						<div class="col-lg-9">
								<textarea required class="summernote" name="content_am" >{{form.content_am}}</textarea>
						</div>
							
					</div>

					<div class="form-group row">
						{%if  form.blogImage %}
						<label class="col-form-label col-lg-3">Blog image Currently</label>
						

					<div class="card">
                        <div class="card-img-actions m-1">
                            <img class="card-img img-fluid" src="{{form.blogImage.url}}" width ="250" height = "200" id="blogEditShow" alt="" >
                            <div class="card-img-actions-overlay card-img">
                                
                                <a style="max-height:80px; max-width:80px; overflow: hidden" href="{{form.blogImage.url}}" class="btn btn-outline bg-white text-white border-white border-2 btn-icon rounded-round" data-popup="lightbox" rel="group">
                                    <i class="icon-eye"></i>
                                </a>
                                
                            </div>
                        </div>
                    </div>

						{%else%}
						<label class="col-form-label col-lg-3"> No image in the database*</label>
						{%endif%}
					</div>
					
					<div class="form-group row">
				    <label class="col-form-label col-lg-3">Publish </label>
						

							<div class="col-lg-9">
								{%if form.publish == True %}
							<input type="checkbox" name="publish" class="form-check-input" id="exampleCheck1" checked>
								{%endif%}

								{%if form.publish == False %}
							<input type="checkbox" name="publish" value=OFF class="form-check-input" id="exampleCheck1">
								{%endif%}
						</div>
							
				  	</div>
				  		
					
					 
					<div class="form-group row">
						<label class="col-form-label col-lg-2">Blog Image *</label>
						<div class="col-lg-10">
							<div class="uniform-uploader">
								<input type="file" name="blogImage" class="form-input-styled" id="BlogImage" data-fouc="">
								<span class="filename" style="user-select: none;"></span>
								<span class="action btn bg-warning" style="user-select: none;">Choose File</span>
							</div>
						</div>
					</div>

							
						
				</fieldset>

				<div class="text-right">
					<button style="padding-left: 10%; padding-right: 10%;" type="submit"
						class="btn btn-primary rounded-round" onclick="return confirm('are you sure you Done with editing')">Submit </button>
				</div>
			</form>
		</div>
	</div>
</div>
<!-- /content area -->
<script>
	$(document).ready(function () {
		$('#summernote').summernote();
		$('.summernote').summernote();
	});


	var image = document.getElementById('image');
	// image.addEventListener('change',()=>{
	


	var blogimagesource = document.getElementById('BlogImage')
	var blogimageshow = document.getElementById('blogEditShow')
	$("#BlogImage").change(function () {
		console.log("log1")
		if (this.files && this.files[0]) {
			
			// blogimageshow.src = this.files[0]
			var reader = new FileReader();
			reader.onload = function (e) {
            $("#blogEditShow").attr("src", e.target.result);
	          }
	          reader.readAsDataURL(this.files[0]);
			}
		})
	// })
// Get the Cropper.js instance after init
</script>
{%endblock%}