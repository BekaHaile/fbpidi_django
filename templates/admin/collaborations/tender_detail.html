{%extends 'admin/base_site.html'%}
{% block extrastyle %}

	<!-- Theme JS files -->
	<script src="/static/admin/global_assets/js/plugins/tables/datatables/datatables.min.js"></script>
	<script src="/static/admin/global_assets/js/plugins/forms/selects/select2.min.js"></script>
    <script src="/static/admin/global_assets/js/demo_pages/datatables_advanced.js"></script>
    <!-- Theme JS files from index.html-->
    <script src="/static/admin/global_assets/js/plugins/visualization/echarts/echarts.min.js"></script>
	<script src="/static/admin/global_assets/js/demo_pages/charts/echarts/columns_waterfalls.js"></script>
    <script src="/static/admin/global_assets/js/demo_pages/charts/echarts/pies_donuts.js"></script>
        <!-- /theme JS files -->
	 
	<!-- /theme JS files -->
 
{% endblock %}
{%block pagename%}Poll Detail{%endblock%}
{%block content%}

 <!--  Only super users can watch this -->

 {% if perms.collaborations.view_pollsquestion %}
<!--Breadcrumb-->
        <!-- Note -->
        
		<section>
			<div class="bannerimg cover-image bg-background3" data-image-src="/static/frontpages/images/banners/banner2.jpg">
				<div class="header-text mb-0">
					<div class="container">
						<div class="text-center " style="color: lightskyblue;">
							<h1 class="">Poll-Details</h1>
							<ol class="breadcrumb">
								<li class="breadcrumb-item"><a href="/admin/">Home</a></li>
								<li class="breadcrumb-item"><a href="/admin/polls/">Polls</a></li>
								<li class="breadcrumb-item active " aria-current="page">Poll-Details</li>
							</ol>
						</div>
					</div>
				</div>
			</div>
		</section>
        <!--/Breadcrumb-->
        
        <div class="card-header header-elements-inline">
						
            <div class="header-elements">
                {% if poll.count_votes == 0  %}
                    {% if perms.collaborations.edit_polls or poll.user == user %}
                    <div class="list-icons">
                        <a href="{%url 'admin:edit_poll' id=poll.id %}"   style = "margin-left: 40px; " class = "btn bg-teal btn-sm rounded-round"><i class="icon-pencil mr-2"></i>Edit this Poll</a>
                    </div>
                    {%endif%}
                {% endif %}
                
            </div>
        </div>

		<!--Poll Detail-->
		<section class="sptb">
            {% if poll %}
			<div class="container">
				<div class="row">
					<div class="d-block mx-auto col-lg-12 col-md-12">
						<div class="card">

							<div class="card-body">
								<a href="#" class="text-body"><h2 class="font-weight-semibold text-capitalize">Poll title: {{poll.title}}</h2></a>
																<div class="item7-card-desc d-flex mb-2 mt-3">

                                                                    
									<a href="#"><i class="fa fa-calendar-o text-muted mr-2"></i>poll created at : {{poll.timestamp}}</a>
                                    <a href="#"><i class="fa fa-user text-muted mr-2" style="margin-left: 10px;" ></i>By {{poll.user}}</a>
                                    <a href="#"><i class="fa fa-star text-muted mr-2" style="margin-left: 10px;"></i>Total votes {{poll.count_votes}}</a>
                                    
                                </div>
                                                                 
                                <h2>Poll description</h2>
                                <h5>{{poll.description|safe}}</h5>
							</div>
						</div>

                        <!--Choices-->
                            <div class="card">
                                <div class="card-header">

                                    {% if poll.choices.all.count > 1 %}
                                        <h3 class="card-title">{{poll.choices.all.count}} Choices</h3>
                                        
                                    {% else %}
                                        <h3 class="card-title">{{poll.choices.all.count}} Choice</h3>
                                    {% endif %}
                                    <!-- <h4 style="color: lightsalmon;"> Super users cannot Vote.</h4> -->
                                </div>

                                
                                
                                    {% for choice in poll.choices.all %}
                                        <div class="card-body">
                                            
                                            
                                            <div class="d-sm-flex p-5 mt-4 border sub-review-section">
                                                
                                                <div class="media-body">
                                                    <h5 class="mt-0 mb-1 font-weight-semibold"> {{ choice.choice_name}}
                                                       
                                                    </h5>
                                                   
                                                        <span class="fs-14 ml-2"><h6 style="display: inline;"> {{choice.count_votes}} Vote from a total of {{poll.count_votes}} poll votes</h6><i class="fa fa-star " style="color: yellow;"></i></span>
                                                   <br>
                                                    <p class="text-muted"><i class="fa fa-calendar"></i> {{choice.timestamp}} </p>
                                                    <br><br>
                                                    <h4>Poll Description</h4>
                                                    <p class="font-13  mb-2 mt-2">{{choice.description|safe}}</p>
                                                    
                                                    <!-- if the user is the creator or has voted hide the vote button -->

                                                    {% if user.is_superuser == False and not user == poll.user and has_voted == False %}
                                                        <div class = "choice-btn-group" class="badge badge-secondary">
                                                            <span class="badge badge-secondary">
                                                                <label for = "{{choice.pk}}"><span style="font-size: medium;">Vote</span></label>
                                                                <input id = "{{choice.pk}}" type="radio" name="selected_choice" value="{{choice.pk}}" /> 
                                                                
                                                            </span>
                                                        </div>
                                    
                                                    {% endif %}
                                                    
                                                    
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}

     
                            </div>

                            <!--/Choices-->
                        
						
					</div>
                </div>
                


<!-- ############################## -->
  <!-- Content area -->
  <div class="content" style="padding: 0;">

    <div class="row">
        <div class="col-xl-12">

            <!-- Marketing campaigns -->
            <div class="card">
                <div class="card-header header-elements-inline">
                    <h5 class="card-title">Statics of Choices</h5>
                    <div class="header-elements">
                        <div class="list-icons">
                            <a class="list-icons-item" data-action="collapse"></a>
                            <a class="list-icons-item" data-action="reload"></a>
                            <a class="list-icons-item" data-action="remove"></a>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="chart-container">
                        <div class="chart has-fixed-height" id="pie_basic"></div>
                    </div>
                </div>
            </div>
            <!-- /marketing campaigns -->


            <!-- Quick stats boxes -->
            <div class="row">
                <div class="col-lg-4">

                    <!-- Members online -->
                    <div class="card bg-teal-400">
                        <div class="card-body">
                            <div class="d-flex">
                                <h3 class="font-weight-semibold mb-0">3,450</h3>
                                <span class="badge bg-teal-800 badge-pill align-self-center ml-auto">+53,6%</span>
                            </div>

                            <div>
                                Members online
                                <div class="font-size-sm opacity-75">489 avg</div>
                            </div>
                        </div>

                        <div class="container-fluid">
                            <div id="members-online"></div>
                        </div>
                    </div>
                    <!-- /members online -->

                </div>

                <div class="col-lg-4">

                    <!-- Current server load -->
                    <div class="card bg-pink-400">
                        <div class="card-body">
                            <div class="d-flex">
                                <h3 class="font-weight-semibold mb-0">49.4%</h3>
                                <div class="list-icons ml-auto">
                                    <div class="list-icons-item dropdown">
                                        <a href="#" class="list-icons-item dropdown-toggle"
                                           data-toggle="dropdown"><i class="icon-cog3"></i></a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a href="#" class="dropdown-item"><i class="icon-sync"></i> Update
                                                data</a>
                                            <a href="#" class="dropdown-item"><i
                                                    class="icon-list-unordered"></i> Detailed log</a>
                                            <a href="#" class="dropdown-item"><i class="icon-pie5"></i>
                                                Statistics</a>
                                            <a href="#" class="dropdown-item"><i class="icon-cross3"></i> Clear
                                                list</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                Current server load
                                <div class="font-size-sm opacity-75">34.6% avg</div>
                            </div>
                        </div>

                        <div id="server-load"></div>
                    </div>
                    <!-- /current server load -->

                </div>

                <div class="col-lg-4">

                    <!-- Today's revenue -->
                    <div class="card bg-blue-400">
                        <div class="card-body">
                            <div class="d-flex">
                                <h3 class="font-weight-semibold mb-0">{{poll.count_votes}} Vote</h3>
                                <div class="list-icons ml-auto">
                                    <a class="list-icons-item" data-action="reload"></a>
                                </div>
                            </div>

                            <div>
                                Today's revenue
                                <div class="font-size-sm opacity-75">$37,578 avg</div>
                            </div>
                        </div>

                        <div id="today-revenue"></div>
                    </div>
                    <!-- /today's revenue -->

                </div>
            </div>
            <!-- /quick stats boxes -->


            <!-- Support tickets -->
           
</div>
<!-- /content area -->

            </div>

            {% else %}
                <h2> Poll Not found!</h2>
            {% endif %}
		</section>
		
		



{% else %}
<h1>You are not allowed to view this page!!</h1>
<!-- endif of if user.is_superuser = True -->
{% endif %}
		<!--/Newsletter-->
{% endblock %}