{%extends 'admin/base_site.html'%}
{%load crispy_forms_tags %}
{% block extrastyle %}
<script src="/static/admin/global_assets/js/plugins/forms/styling/uniform.min.js"></script>
<script src="/static/admin/global_assets/js/demo_pages/form_inputs.js"></script>
{% endblock %}
{%block pagename%}Edit Announcement{%endblock%}
{%block content%}

<!-- Content area -->
<div class="content">

	 
	<div class="card">

		<div class="card-body">

			<form action="" method="POST" enctype="multipart/form-data">
				<fieldset class="mb-3 ml-3 mr-3">
					<legend class="text-uppercase font-size-sm font-weight-bold">Edit Announcement</legend>
					<p class="mb-4"> All Fields ending with * are required. You are required to fill fields in English and Amharic</p>
					{{form.errors}}
					{%csrf_token%}
					{%if form.errors%}
					<div class="alert alert-danger" role="alert">
					  {{form.errors}}
					</div>
					{% endif %}
					{%csrf_token%}
					<div class="form-group row">
						<label class="col-form-label col-lg-3">Title (English)*</label>
						<div class="col-lg-9">
							<input type="text" name="title" class="form-control" value="{{form.title}} " id="">
						 
							
						</div>
					</div>
					<div class="form-group row">
						<label class="col-form-label col-lg-3">Title (Amharic) *</label>
							<div class="col-lg-9">
							<input type="text"required name="title_am" class="form-control" value="{{form.title_am}}" id="">
						</div>
							
					</div> 

					<div class="form-group row">
						<label class="col-form-label col-lg-3"> Content (English)*</label>
						<div class="col-lg-9">
								<textarea  required class="summernote" name="containt" >{{form.containt}}</textarea>
						</div>
							
					</div>

					<div class="form-group row">
						<label class="col-form-label col-lg-3"> Content (Amharic) *</label>
						<div class="col-lg-9">
								<textarea required class="summernote" name="containt_am" >{{form.containt_am}}</textarea>
						</div>
							
					</div>

					<div class="card">
						<label class="col-form-label col-lg-3"> Manage images *</label>
		                <div class="card-header">   
		                </div>
		                <div class="card-body" >    
		                        <div class="media-body">

		                            {%for image in form.announcementimages%}
		                                <img style = "display: inline; " src = "{{image.image.url}}" width ="250" height = "200" alt="{{image.image.name}}"/>
		                                <a  href="{%url 'admin:delete' model_name='AnnouncementImages' id=image.id %}"  onclick="return confirm ('Are you sure you want to delete this image?')"><i style = "margin-left:3px; size: 15px;" class="icon-trash"></i></a>
		                                            
		                            {%endfor%}
		                            {%if form.announcementimages.count == 0 %}
		                            <div class="alert alert-warning" role="alert">
										<button type="button" class="close" data-dismiss="alert"><span>&times;</span></button>
										<span class="font-weight-semibold">You have to upload an image</span>
									</div>
		                            
		                        </div>
		                    
		                </div>
		                <div class="card-footer">   
		                	<div class="form-group row">
						 
						  <label class="col-form-label col-lg-3">Add images:</label>
						  <div class="col-lg-9">
						  		<input required type="file" id="files" name="images" multiple>
						  </div>
						
							</div>
		                </div>        
		            </div> 

		                            {%else%}
		                            
		                        </div>
		                    
		                </div>
		                <div class="card-footer">   
		                	<div class="form-group row">
						 
						  <label class="col-form-label col-lg-3">Add images:</label>
						  <div class="col-lg-9">
						  		<input type="file" id="files" name="images" multiple>
						  </div>
						
							</div>
		                </div>        
		            </div>
		            			{%endif%}
						
				</fieldset>

				<div class="text-right">
					<button style="padding-left: 10%; padding-right: 10%;" type="submit"
						class="btn btn-primary rounded-round" onclick="return confirm('are you sure you Done with editing')">Submit </button>
				</div>
			</form>
		</div>
	</div>
</div>
<!-- /content area -->
<script>
	$(document).ready(function () {
		$('#summernote').summernote();
		$('.summernote').summernote();
	});
</script>
{%endblock%}